spec:
  id: SPEC-SKILLS-001
  name: Skills System
  version: 1.0.0
  status: active

description: |
  Skills system for Dash v2.0 enabling modular, discoverable capabilities
  that agents can use. Based on pi-mono patterns with TypeBox schemas
  for type-safe tool definitions.

requirements:
  - id: REQ-001
    description: Core skills defined (read, write, edit, bash, test)
    priority: P0
    test: ls skills/core/*.js 2>/dev/null | wc -l | test ">= 5"

  - id: REQ-002
    description: Skills use TypeBox for type safety
    priority: P1
    test: grep "import.*Type.*from.*@sinclair" skills/core/*.js | wc -l | test ">= 5"

  - id: REQ-003
    description: Skill registration system exists
    priority: P1
    test: test -f skills/registration.ts || test -f skills/registration.js

  - id: REQ-004
    description: Auto-discovery finds all skills
    priority: P1
    test: scripts/discover-skills.js --list | grep -E "read|write|edit|bash|test" | wc -l | test ">= 5"

  - id: REQ-005
    description: Skills have documentation
    priority: P2
    test: ls skills/*.md 2>/dev/null | wc -l | test "> 0"

  - id: REQ-006
    description: Skills can be invoked by agents
    priority: P0
    test: scripts/invoke-skill.js read --help | grep "usage\|help" | test "not null"

  - id: REQ-007
    description: New skills can be added dynamically
    priority: P2
    test: scripts/add-skill.js --template | grep "skill.*template" | test "not null"

  - id: REQ-008
    description: Skill usage logged for analytics
    priority: P2
    test: cat .dash/skill-usage.json 2>/dev/null | jq '.total' | test "not null"

implementation:
  files:
    - skills/core/read.js
    - skills/core/write.js
    - skills/core/edit.js
    - skills/core/bash.js
    - skills/core/test.js
    - skills/registration.ts
    - skills/discovery.ts
    - skills/SKILLS.md

prompt_template: |
  You are implementing the Skills System for Dash v2.0.

  This system provides modular, discoverable capabilities for agents:

  CORE SKILLS (5 required):
  1. read - Read files with encoding support
  2. write - Create/overwrite files
  3. edit - Make precise file edits
  4. bash - Execute shell commands
  5. test - Run test suites

  Requirements:
  - [P0] 5 core skills implemented
  - [P1] TypeBox schemas for all tools
  - [P1] Skill registration system
  - [P1] Auto-discovery of skills
  - [P2] Skill documentation
  - [P0] Skills invokable by agents
  - [P2] Dynamic skill addition
  - [P2] Usage logging

  Implementation:
  - Use TypeBox (Type) for parameter validation
  - Follow pi-mono patterns for tools
  - Create skill registration API
  - Implement auto-discovery
  - Document each skill
  - Create invocation CLI
  - Log usage for analytics

  Success Criteria:
  - [ ] 5 core skills exist
  - [ ] All use TypeBox schemas
  - [ ] Registration works
  - [ ] Auto-discovery finds all
  - [ ] Documentation exists
  - [ ] Invocation works
  - [ ] Usage logged

validation:
  command: scripts/discover-skills.js --list && scripts/invoke-skill.js --help
  coverage_threshold: 90

metadata:
  created: 2026-02-02
  author: Overnight Executive
  tags: [skills, tools, modular, TypeBox, pi-mono]
  related:
    - specs/active/openclaw-integration.yaml
    - packages/agent/src/types.ts (for reference)
