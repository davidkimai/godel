spec:
  id: SPEC-AGENT-MD-001
  name: Agent MD System
  version: 1.0.0
  status: active

description: |
  Markdown-based agent documentation and onboarding system for Dash v2.0.
  Provides structured, versioned documentation that agents can read and
  follow for autonomous operation.

requirements:
  - id: REQ-001
    description: AGENTS.md exists and is current
    priority: P0
    test: test -f AGENTS.md && grep "SWARM_STRATEGY\|HEARTBEAT" AGENTS.md | test "not null"

  - id: REQ-002
    description: SOUL.md defines agent persona
    priority: P1
    test: test -f SOUL.md && cat SOUL.md | grep "persona\|vibe\|identity" | test "not null"

  - id: REQ-003
    description: USER.md captures user preferences
    priority: P1
    test: test -f USER.md && cat USER.md | grep "Name\|Context\|Preferences" | test "not null"

  - id: REQ-004
    description: HEARTBEAT.md defines monitoring checklist
    priority: P0
    test: test -f HEARTBEAT.md && grep "HEARTBEAT_OK\|HEARTBEAT.md" HEARTBEAT.md | test "not null"

  - id: REQ-005
    description: All agent MD files are versioned
    priority: P2
    test: grep "version\|Version" AGENTS.md SOUL.md USER.md HEARTBEAT.md | test "not null"

  - id: REQ-006
    description: New agents can onboard by reading MD files
    priority: P1
    test: scripts/agent-onboarding.sh --test | grep "onboarding.*success\|complete"

  - id: REQ-007
    description: MD files support dynamic updates
    priority: P2
    test: grep "update\|refresh\|reload" scripts/*.js | grep "AGENTS.md\|SOUL.md" | test "not null"

  - id: REQ-008
    description: Agent MD coverage across all critical systems
    priority: P1
    test: ls *.md AGENTS.md SOUL.md USER.md HEARTBEAT.md IDENTITY.md TOOLS.md | wc -l | test ">= 5"

implementation:
  files:
    - AGENTS.md
    - SOUL.md
    - USER.md
    - HEARTBEAT.md
    - IDENTITY.md
    - TOOLS.md
    - scripts/agent-onboarding.sh

prompt_template: |
  You are implementing the Agent MD System for Dash v2.0.

  This system provides markdown-based documentation that agents read
  for autonomous operation. Key files:

  1. AGENTS.md - Agent orchestration rules and strategies
  2. SOUL.md - Agent persona and identity
  3. USER.md - User preferences and context
  4. HEARTBEAT.md - Monitoring checklist for agents
  5. IDENTITY.md - Agent identity configuration
  6. TOOLS.md - Tool documentation

  Requirements:
  - [P0] AGENTS.md has SWARM_STRATEGY, HEARTBEAT, CRON sections
  - [P0] HEARTBEAT.md defines HEARTBEAT_OK response
  - [P1] All files have version info
  - [P1] New agents can onboard by reading files
  - [P2] Files support dynamic updates

  Implementation:
  - Create comprehensive AGENTS.md with all patterns
  - Define agent persona in SOUL.md
  - Capture user preferences in USER.md
  - Document heartbeat protocol in HEARTBEAT.md
  - Create agent-onboarding.sh script
  - Version all files

  Success Criteria:
  - [ ] AGENTS.md complete with all sections
  - [ ] SOUL.md defines clear persona
  - [ ] USER.md has user context
  - [ ] HEARTBEAT.md has monitoring checklist
  - [ ] Onboarding script works
  - [ ] All files versioned

validation:
  command: scripts/agent-onboarding.sh --test && ls -la *.md | wc -l
  coverage_threshold: 90

metadata:
  created: 2026-02-02
  author: Overnight Executive
  tags: [documentation, agent, markdown, onboarding]
  related:
    - specs/active/startup-files.yaml
    - scripts/agent-onboarding.sh
