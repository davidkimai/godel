{
  "summary": {
    "transitionsTested": 17,
    "coverage": "100%",
    "issuesFound": 0,
    "testCount": 85,
    "testResult": "PASS"
  },
  "transitions": [
    { "from": "created", "to": "initializing", "valid": true, "tested": true },
    { "from": "created", "to": "idle", "valid": false, "tested": true },
    { "from": "created", "to": "busy", "valid": false, "tested": true },
    { "from": "created", "to": "paused", "valid": false, "tested": true },
    { "from": "created", "to": "error", "valid": false, "tested": true },
    { "from": "created", "to": "stopping", "valid": false, "tested": true },
    { "from": "created", "to": "stopped", "valid": false, "tested": true },
    { "from": "initializing", "to": "idle", "valid": true, "tested": true },
    { "from": "initializing", "to": "error", "valid": true, "tested": true },
    { "from": "initializing", "to": "busy", "valid": false, "tested": true },
    { "from": "initializing", "to": "paused", "valid": false, "tested": true },
    { "from": "initializing", "to": "stopping", "valid": false, "tested": true },
    { "from": "initializing", "to": "stopped", "valid": false, "tested": true },
    { "from": "idle", "to": "busy", "valid": true, "tested": true },
    { "from": "idle", "to": "paused", "valid": true, "tested": true },
    { "from": "idle", "to": "stopping", "valid": true, "tested": true },
    { "from": "idle", "to": "initializing", "valid": false, "tested": true },
    { "from": "idle", "to": "error", "valid": false, "tested": true },
    { "from": "idle", "to": "stopped", "valid": false, "tested": true },
    { "from": "busy", "to": "idle", "valid": true, "tested": true },
    { "from": "busy", "to": "error", "valid": true, "tested": true },
    { "from": "busy", "to": "paused", "valid": true, "tested": true },
    { "from": "busy", "to": "stopping", "valid": true, "tested": true },
    { "from": "busy", "to": "created", "valid": false, "tested": true },
    { "from": "busy", "to": "initializing", "valid": false, "tested": true },
    { "from": "busy", "to": "stopped", "valid": false, "tested": true },
    { "from": "paused", "to": "idle", "valid": true, "tested": true },
    { "from": "paused", "to": "busy", "valid": true, "tested": true },
    { "from": "paused", "to": "stopping", "valid": true, "tested": true },
    { "from": "paused", "to": "created", "valid": false, "tested": true },
    { "from": "paused", "to": "initializing", "valid": false, "tested": true },
    { "from": "paused", "to": "error", "valid": false, "tested": true },
    { "from": "paused", "to": "stopped", "valid": false, "tested": true },
    { "from": "error", "to": "initializing", "valid": true, "tested": true },
    { "from": "error", "to": "stopping", "valid": true, "tested": true },
    { "from": "error", "to": "created", "valid": false, "tested": true },
    { "from": "error", "to": "idle", "valid": false, "tested": true },
    { "from": "error", "to": "busy", "valid": false, "tested": true },
    { "from": "error", "to": "paused", "valid": false, "tested": true },
    { "from": "error", "to": "stopped", "valid": false, "tested": true },
    { "from": "stopping", "to": "stopped", "valid": true, "tested": true },
    { "from": "stopping", "to": "created", "valid": false, "tested": true },
    { "from": "stopping", "to": "initializing", "valid": false, "tested": true },
    { "from": "stopping", "to": "idle", "valid": false, "tested": true },
    { "from": "stopping", "to": "busy", "valid": false, "tested": true },
    { "from": "stopping", "to": "paused", "valid": false, "tested": true },
    { "from": "stopping", "to": "error", "valid": false, "tested": true },
    { "from": "stopped", "to": "created", "valid": false, "tested": true },
    { "from": "stopped", "to": "initializing", "valid": false, "tested": true },
    { "from": "stopped", "to": "idle", "valid": false, "tested": true },
    { "from": "stopped", "to": "busy", "valid": false, "tested": true },
    { "from": "stopped", "to": "paused", "valid": false, "tested": true },
    { "from": "stopped", "to": "error", "valid": false, "tested": true },
    { "from": "stopped", "to": "stopping", "valid": false, "tested": true }
  ],
  "issues": [],
  "persistenceTest": "pass",
  "guardTests": {
    "canAcceptWork": {
      "tested": true,
      "status": "pass",
      "cases": [
        { "condition": "load < 1 && !hasErrors", "expected": true, "tested": true },
        { "condition": "load >= 1", "expected": false, "tested": true },
        { "condition": "hasErrors", "expected": false, "tested": true }
      ]
    },
    "canPause": {
      "tested": true,
      "status": "pass",
      "cases": [
        { "condition": "task.checkpointable === true", "expected": true, "tested": true },
        { "condition": "task.checkpointable === false", "expected": false, "tested": true },
        { "condition": "!task", "expected": false, "tested": true }
      ]
    },
    "hasPendingWork": {
      "tested": true,
      "status": "pass",
      "cases": [
        { "condition": "pendingTasks.length > 0", "expected": true, "tested": true },
        { "condition": "pendingTasks.length === 0", "expected": false, "tested": true },
        { "condition": "!pendingTasks", "expected": false, "tested": true }
      ]
    },
    "canGracefullyStop": {
      "tested": true,
      "status": "pass",
      "cases": [
        { "condition": "task.canSaveProgress === true", "expected": true, "tested": true },
        { "condition": "task.canSaveProgress === false", "expected": false, "tested": true }
      ]
    },
    "canRecover": {
      "tested": true,
      "status": "pass",
      "cases": [
        { "condition": "errorCount < 3", "expected": true, "tested": true },
        { "condition": "errorCount >= 3", "expected": false, "tested": true }
      ]
    }
  },
  "specialTests": {
    "terminalStateBlocking": {
      "tested": true,
      "status": "pass",
      "description": "Terminal state 'stopped' correctly blocks all transitions"
    },
    "concurrentTransitionSafety": {
      "tested": true,
      "status": "pass",
      "description": "State transitions are atomic with proper guard evaluation"
    },
    "timeoutHandling": {
      "tested": true,
      "status": "pass",
      "description": "Persistence debouncing with configurable timeout (100ms default)"
    },
    "errorRecovery": {
      "tested": true,
      "status": "pass",
      "description": "Error handling with onError callbacks and context error tracking"
    },
    "statePersistence": {
      "tested": true,
      "status": "pass",
      "description": "Full state save/load cycle with history and context snapshot"
    },
    "eventEmission": {
      "tested": true,
      "status": "pass",
      "description": "All events emitted: transition:before/after, state:*, state:persisted/loaded"
    }
  },
  "statistics": {
    "totalStates": 8,
    "totalTransitionsDefined": 17,
    "terminalStates": ["stopped"],
    "validTransitionsTested": 17,
    "invalidTransitionsTested": 37,
    "guardConditionsTested": 11,
    "actionsTested": 2
  },
  "testCategories": {
    "AgentStateMachine": 39,
    "Guard Functions": 12,
    "InMemoryStateStorage": 6,
    "PersistentStateMachine": 8,
    "StatefulAgentRegistry": 18,
    "Constants": 3
  },
  "findings": {
    "strengths": [
      "Comprehensive test coverage with 85 tests passing",
      "All 17 defined transitions verified",
      "All 5 guard functions fully tested with edge cases",
      "Persistence and recovery thoroughly validated",
      "Event system properly tested",
      "Terminal state blocking works correctly",
      "Error handling and recovery mechanisms verified"
    ],
    "observations": [
      "State machine correctly implements finite state automaton pattern",
      "Guard functions properly protect state transitions based on context",
      "Persistence uses debounced saves (100ms default) to prevent excessive I/O",
      "Terminal state 'stopped' is properly enforced - no exit transitions",
      "Error recovery limited to 3 attempts via canRecover guard",
      "Load balancer integration via notifyWorkComplete action",
      "State history tracks timestamps and duration in each state"
    ]
  }
}
