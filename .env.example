# Dash Configuration - OpenClaw Gateway Integration
# Generated: 2026-02-02
# Reference: https://docs.openclaw.ai/gateway/configuration
#
# SECURITY NOTICE: Never commit this file with real values to version control.
# Copy this file to .env and fill in your actual values.

# =============================================================================
# OpenClaw Gateway Configuration
# =============================================================================

# Gateway WebSocket URL (default: ws://127.0.0.1:18789)
OPENCLAW_GATEWAY_URL=ws://127.0.0.1:18789

# Authentication token for OpenClaw Gateway
# Obtain this from your OpenClaw configuration or via `openclaw config get`
OPENCLAW_GATEWAY_TOKEN=your_openclaw_gateway_token_here

# =============================================================================
# OpenClaw-Dash Integration (SPEC-002)
# =============================================================================

# Enable OpenClaw to use Dash as native orchestration platform
OPENCLAW_DASH_ADAPTER_ENABLED=true

# Webhook URL for forwarding Dash events to OpenClaw
# OpenClaw will receive real-time agent events at this endpoint
OPENCLAW_EVENT_WEBHOOK_URL=https://your-openclaw-instance.com/webhooks/dash

# Event filter - comma-separated list of event types to forward
# Leave empty to forward all events
# Examples: agent.spawned,agent.completed,agent.failed,agent.progress
OPENCLAW_EVENT_FILTER=

# Webhook authentication token (optional)
# If set, events will include Authorization: Bearer header
OPENCLAW_WEBHOOK_AUTH_TOKEN=

# Session identifier (optional, auto-generated if not set)
# OPENCLAW_SESSION=

# =============================================================================
# Dash API Configuration
# =============================================================================

# Internal Dash API for self-improvement orchestration
DASH_API_URL=http://localhost:7373

# SECURITY: API Key - Must be in format: dash_<prefix>_<64-hex-chars>
# Generate with: node -e "console.log('dash_live_' + require('crypto').randomBytes(32).toString('hex'))"
DASH_API_KEY=your_secure_api_key_here

# Rate limit: requests per minute (default: 1000)
DASH_RATE_LIMIT=1000

# CORS allowed origins (comma-separated)
DASH_CORS_ORIGINS=http://localhost:3000,http://localhost:5173

# =============================================================================
# Security Configuration
# =============================================================================

# SECURITY: Session secret for cookie signing (generate with: openssl rand -base64 32)
SESSION_SECRET=your_session_secret_here_min_32_chars_long

# Node environment: 'development' | 'production' | 'test'
NODE_ENV=development

# =============================================================================
# Database Configuration - PostgreSQL
# =============================================================================

POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=dash
POSTGRES_USER=your_postgres_user
POSTGRES_PASSWORD=your_secure_postgres_password
POSTGRES_SSL=false

# Connection Pool Settings
POSTGRES_MIN_POOL_SIZE=2
POSTGRES_MAX_POOL_SIZE=20
POSTGRES_CONNECTION_TIMEOUT=5000
POSTGRES_IDLE_TIMEOUT=30000

# Retry Settings
POSTGRES_RETRY_ATTEMPTS=3
POSTGRES_RETRY_DELAY=1000

# =============================================================================
# Redis Configuration (for Event Bus)
# =============================================================================

REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=your_redis_password_or_leave_empty
REDIS_DB=0

# =============================================================================
# SQLite Database (Legacy - for backward compatibility)
# =============================================================================

DASH_DB_PATH=./dash.db

# =============================================================================
# Security & Permissions
# =============================================================================

# OpenClaw mode: 'restricted' | 'full'
# - restricted: Limited tools, sandboxed execution
# - full: All tools available
OPENCLAW_MODE=restricted

# Sandbox mode for agent execution: 'none' | 'non-main' | 'docker'
OPENCLAW_SANDBOX_MODE=non-main

# =============================================================================
# Budget & Resource Limits
# =============================================================================

# Default budget per agent (USD)
DEFAULT_AGENT_BUDGET=1.00

# Maximum budget for self-improvement (USD)
SELF_IMPROVEMENT_MAX_BUDGET=10.00

# Maximum tokens per agent
MAX_TOKENS_PER_AGENT=100000

# =============================================================================
# Monitoring Configuration
# =============================================================================

# Grafana Admin Credentials (required, no defaults)
GRAFANA_ADMIN_USER=your_grafana_admin_user
GRAFANA_ADMIN_PASSWORD=your_secure_grafana_password

# pgAdmin Credentials (required, no defaults)
PGADMIN_EMAIL=your_email@example.com
PGADMIN_PASSWORD=your_secure_pgadmin_password

# =============================================================================
# Channel Configuration (for multi-channel routing)
# =============================================================================

# Telegram Bot Token (if using Telegram channel)
# TELEGRAM_BOT_TOKEN=your_telegram_bot_token

# Discord Bot Token (if using Discord channel)
# DISCORD_BOT_TOKEN=your_discord_bot_token

# Slack Tokens (if using Slack channel)
# SLACK_BOT_TOKEN=xoxb-your-slack-bot-token
# SLACK_APP_TOKEN=xapp-your-slack-app-token

# =============================================================================
# Development & Testing
# =============================================================================

# Enable mock mode for testing (no real gateway required)
# MOCK_OPENCLAW=true

# Debug logging level: 'debug' | 'info' | 'warn' | 'error'
LOG_LEVEL=info

# Enable verbose OpenClaw logging
VERBOSE_OPENCLAW=false

# =============================================================================
# Logging Configuration
# =============================================================================

# Service name for log entries
DASH_SERVICE_NAME=dash

# Log level override (same as LOG_LEVEL)
DASH_LOG_LEVEL=info

# Loki URL for log queries
LOKI_URL=http://localhost:3100

# Grafana URL for dashboards
GRAFANA_URL=http://localhost:3000

# Log file directory (ensure this exists)
LOG_DIR=./logs
